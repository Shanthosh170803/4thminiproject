===AvailabilityStatus.java===
package com.pg.pg_accommodation.entity;

public enum AvailabilityStatus {
	AVAILABLE,
	OCCUPIED
}

===Owner.java===
package com.pg.pg_accommodation.entity;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.validation.constraints.Min;
import jakarta.validation.constraints.NotBlank;

@Entity
public class Owner {

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private Long id;
	@NotBlank
	private String name;
	private String email;
	private String mobile;
	@Min(18)
	private int age;
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getEmail() {
		return email;
	}
	public void setEmail(String email) {
		this.email = email;
	}
	public String getMobile() {
		return mobile;
	}
	public void setMobile(String mobile) {
		this.mobile = mobile;
	}
	public int getAge() {
		return age;
	}
	public void setAge(int age) {
		this.age = age;
	}
}

===PgPlace.java===
package com.pg.pg_accommodation.entity;

import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.Table;

@Entity
@Table(name = "pg_places")
public class PgPlace {

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private Long id;
	private String registrationNumber;
	private double builtUpArea;
	private double rentAmount;
	private String city;
	private String locality;
	@Enumerated(EnumType.STRING)
	private AvailabilityStatus status;
	private int visitorCount=0;
	@ManyToOne
	@JoinColumn(name="owner_id")
	private Owner owner;
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id = id;
	}
	public String getRegistrationNumber() {
		return registrationNumber;
	}
	public void setRegistrationNumber(String registrationNumber) {
		this.registrationNumber = registrationNumber;
	}
	public double getBuiltUpArea() {
		return builtUpArea;
	}
	public void setBuiltUpArea(double builtUpArea) {
		this.builtUpArea = builtUpArea;
	}
	public double getRentAmount() {
		return rentAmount;
	}
	public void setRentAmount(double rentAmount) {
		this.rentAmount = rentAmount;
	}
	public String getCity() {
		return city;
	}
	public void setCity(String city) {
		this.city = city;
	}
	public String getLocality() {
		return locality;
	}
	public void setLocality(String locality) {
		this.locality = locality;
	}
	public AvailabilityStatus getStatus() {
		return status;
	}
	public void setStatus(AvailabilityStatus status) {
		this.status = status;
	}
	public int getVisitorCount() {
		return visitorCount;
	}
	public void setVisitorCount(int visitorCount) {
		this.visitorCount = visitorCount;
	}
	public Owner getOwner() {
		return owner;
	}
	public void setOwner(Owner owner) {
		this.owner = owner;
	}
}

===Tenant.java===
package com.pg.pg_accommodation.entity;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.validation.constraints.Min;
import jakarta.validation.constraints.NotBlank;

@Entity
public class Tenant {

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private Long id;
	@NotBlank
	private String name;
	private String email;
	private String mobile;
	@Min(18)
	private int age;
	public Long getId() {
		return id;
	}
	public void setId(Long id) {
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getEmail() {
		return email;
	}
	public void setEmail(String email) {
		this.email = email;
	}
	public String getMobile() {
		return mobile;
	}
	public void setMobile(String mobile) {
		this.mobile = mobile;
	}
	public int getAge() {
		return age;
	}
	public void setAge(int age) {
		this.age = age;
	}
}

===OwnerRepository.java===
package com.pg.pg_accommodation.repository;

import org.springframework.data.jpa.repository.JpaRepository;

import com.pg.pg_accommodation.entity.Owner;

public interface OwnerRepository extends JpaRepository<Owner, Long>{

}

===PgPlaceRepository.java===
package com.pg.pg_accommodation.repository;

import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;

import com.pg.pg_accommodation.entity.AvailabilityStatus;
import com.pg.pg_accommodation.entity.PgPlace;

public interface PgPlaceRepository extends JpaRepository<PgPlace, Long>{

	List<PgPlace> findByCityAndStatus(String city,AvailabilityStatus status);
	List<PgPlace> findByLocalityAndStatus(String locality,AvailabilityStatus status);
	List<PgPlace> findByOwnerId(Long ownerId);
}

===TenantRepository.java===
package com.pg.pg_accommodation.repository;

import org.springframework.data.jpa.repository.JpaRepository;

import com.pg.pg_accommodation.entity.Tenant;

public interface TenantRepository extends JpaRepository<Tenant, Long>{

}

===OwnerService.java===
package com.pg.pg_accommodation.service;

import com.pg.pg_accommodation.entity.Owner;

public interface OwnerService {
	Owner getOwnerById(Long ownerId);
	Owner saveOwner(Owner owner);
}

===PgService.java===
package com.pg.pg_accommodation.service;

import java.util.List;

import com.pg.pg_accommodation.entity.PgPlace;

public interface PgService {
	List<PgPlace> getPgByCity(String city);
	List<PgPlace> getPgByLocality(String locality);
	PgPlace getPgDetails(Long id);
	PgPlace addPgPlace(PgPlace place);
	List<PgPlace> getOwnerPlaces(Long ownerId);
	PgPlace changeStatus(Long id);
}

===TenantService.java===
package com.pg.pg_accommodation.service;


import com.pg.pg_accommodation.entity.Tenant;

public interface TenantService {
	Tenant addTenant(Tenant tenant);
	Tenant getTenantById(Long id);
	public void deleteTenantById(Long id);
}

===OwnerServiceImpl.java===
package com.pg.pg_accommodation.service.impl;

import java.util.Optional;

import org.springframework.stereotype.Service;

import com.pg.pg_accommodation.entity.Owner;
import com.pg.pg_accommodation.repository.OwnerRepository;
import com.pg.pg_accommodation.service.OwnerService;

@Service
public class OwnerServiceImpl implements OwnerService{

	private final OwnerRepository repository;
	
	public OwnerServiceImpl(OwnerRepository repository) {
		this.repository = repository;
	}

	@Override
	public Owner getOwnerById(Long ownerId) {
		// TODO Auto-generated method stub
		return repository.findById(ownerId).orElseThrow();
	}

	@Override
	public Owner saveOwner(Owner owner) {
		// TODO Auto-generated method stub
		return repository.save(owner);
	}

}

===PgServiceImpl.java===
package com.pg.pg_accommodation.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.pg.pg_accommodation.entity.AvailabilityStatus;
import com.pg.pg_accommodation.entity.PgPlace;
import com.pg.pg_accommodation.exception.ResourceNotFoundException;
import com.pg.pg_accommodation.repository.PgPlaceRepository;
import com.pg.pg_accommodation.service.PgService;

@Service
public class PgServiceImpl implements PgService{

	@Autowired
	private PgPlaceRepository repository;
	

	@Override
	public List<PgPlace> getPgByCity(String city) {
		// TODO Auto-generated method stub
		return repository.findByCityAndStatus(city, AvailabilityStatus.AVAILABLE);
	}

	@Override
	public List<PgPlace> getPgByLocality(String locality) {
		// TODO Auto-generated method stub
		return repository.findByLocalityAndStatus(locality, AvailabilityStatus.AVAILABLE);
	}

	@Override
	public PgPlace getPgDetails(Long id) {
		// TODO Auto-generated method stub
		PgPlace place=repository.findById(id).orElseThrow(()-> new ResourceNotFoundException("PG Place not found with ID:"+id));
		place.setVisitorCount(place.getVisitorCount()+1);
		return repository.save(place);
	}

	@Override
	public PgPlace addPgPlace(PgPlace place) {
		// TODO Auto-generated method stub
		place.setStatus(AvailabilityStatus.AVAILABLE);
		return repository.save(place);
	}

	@Override
	public List<PgPlace> getOwnerPlaces(Long ownerId) {
		// TODO Auto-generated method stub
		return repository.findByOwnerId(ownerId);
	}

	@Override
	public PgPlace changeStatus(Long id) {
		// TODO Auto-generated method stub
		PgPlace place=repository.findById(id).orElseThrow(()-> new ResourceNotFoundException("PG Place not found with ID:"+id));
		place.setStatus(place.getStatus()==AvailabilityStatus.AVAILABLE?AvailabilityStatus.OCCUPIED:AvailabilityStatus.AVAILABLE);
		return repository.save(place);
	}

}

===TenantServiceImpl.java===
package com.pg.pg_accommodation.service.impl;


import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.pg.pg_accommodation.entity.Tenant;
import com.pg.pg_accommodation.repository.TenantRepository;
import com.pg.pg_accommodation.service.TenantService;

@Service
public class TenantServiceImpl implements TenantService{

	@Autowired
	TenantRepository repository;
	@Override
	public Tenant addTenant(Tenant tenant) {
		// TODO Auto-generated method stub
		return repository.save(tenant);
	}

	@Override
	public Tenant getTenantById(Long id) {
		// TODO Auto-generated method stub
		return repository.findById(id).orElseThrow();
		
	}

	@Override
	public void deleteTenantById(Long id) {
		// TODO Auto-generated method stub
		repository.deleteById(id);
	}

}

===OwnerController.java===
package com.pg.pg_accommodation.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.pg.pg_accommodation.entity.Owner;
import com.pg.pg_accommodation.entity.PgPlace;
import com.pg.pg_accommodation.service.OwnerService;
import com.pg.pg_accommodation.service.PgService;

@RestController
@RequestMapping("/owner/places")
public class OwnerController {

	@Autowired
	private PgService pgservice;
	@Autowired
	private OwnerService ownerService;
	

	@PostMapping("/add")
	public PgPlace addPlace(@RequestBody PgPlace place) {
		return pgservice.addPgPlace(place);
	}

	
	@GetMapping
	public List<PgPlace> ownerPlaces(@RequestParam Long ownerId){
		return pgservice.getOwnerPlaces(ownerId);
	}
	@PutMapping("/{id}")
	public PgPlace changeStatus(@PathVariable Long id) {
		return pgservice.changeStatus(id);
	}
	
	@PostMapping("/register")
	public Owner registerOwner(@RequestBody Owner owner) {
		return ownerService.saveOwner(owner);
	}
	
}

===PgController.java===
package com.pg.pg_accommodation.controller;

import java.util.List;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.pg.pg_accommodation.entity.PgPlace;
import com.pg.pg_accommodation.service.PgService;

@RestController
@RequestMapping("/pg")
public class PgController {

	private final PgService service;

	public PgController(PgService service) {
		this.service = service;
	}
	
	@GetMapping("/{city}")
	public List<PgPlace> getByCity(@PathVariable String city){
		return service.getPgByCity(city);
	}
	
	@GetMapping("/locality/{locality}")
	public List<PgPlace> getByLocation(@PathVariable String locality){
		return service.getPgByLocality(locality);
	}
	
	@GetMapping("/details/{id}")
	public PgPlace getDetails(@PathVariable Long id) {
		return service.getPgDetails(id);
	}
}

===TenantController.java===
package com.pg.pg_accommodation.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.pg.pg_accommodation.entity.Tenant;
import com.pg.pg_accommodation.service.TenantService;

@RestController
@RequestMapping("/tenant")
public class TenantController {

	@Autowired
	private TenantService service;
	
	@PostMapping("/addTenant")
	public Tenant addTenant(@RequestBody Tenant tenant) {
		return service.addTenant(tenant);
	}
	
	@GetMapping("/getTenant/{id}")
	public Tenant getTenantById(@PathVariable Long id) {
		return service.getTenantById(id);
	}
	
	@DeleteMapping("/deleteTenant/{id}")
	public void deleteTenantById(@PathVariable Long id) {
		service.deleteTenantById(id);
	}
}

===ResourceNotFoundException.java===
package com.pg.pg_accommodation.exception;

public class ResourceNotFoundException extends RuntimeException{

	public ResourceNotFoundException(String message) {
		super(message);
	}
}
===GlobalExceptionHandler.java===
package com.pg.pg_accommodation.exception;

import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;

@ControllerAdvice
public class GlobalExceptionHandler {

	@ExceptionHandler(ResourceNotFoundException.class)
	public ResponseEntity<String> handleNotFound(ResourceNotFoundException ex){
		return new ResponseEntity<>(ex.getMessage(),HttpStatus.NOT_FOUND);
	}
}

===application.properties===
spring.application.name=pg-accommodation
server.port=8085
 
spring.datasource.url=jdbc:mysql://localhost:3306/pg_accommodation
spring.datasource.username=root
spring.datasource.password=root@39
 
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
 
springdoc.swagger-ui.path=/swagger-ui.html

